(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ed3e0508"],{"48cb":function(e,t,n){"use strict";n("c75c")},c75c:function(e,t,n){},f387:function(e,t,n){"use strict";n.r(t);var l=n("1da1"),a=(n("96cf"),n("159b"),n("a434"),{name:"Calculate",data:function(){return{activeNames:[],currentUpdateOptionId:null,options:[]}},mounted:function(){this.queryOptions()},methods:{handleSelectOptions:function(e){return e.forEach((function(e){e.edit=!!Object.prototype.hasOwnProperty.call(e,"edit")&&e.edit})),e},handleSave:function(e,t,n){var a=this;return Object(l.a)(regeneratorRuntime.mark((function l(){var r,o;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return r=a.LODASH.cloneDeep(e),r.data.value[n.$index].edit=!1,l.next=5,a.updateOption(r);case 5:o=l.sent,a.options.splice(t,1,o);case 7:case"end":return l.stop()}}),l)})))()},handleEidt:function(e,t){var n=e.data.value[t.$index];n.edit=!0,this.$set(e.data.value,t.$index,n)},handleRemove:function(e,t,n){var a=this;return Object(l.a)(regeneratorRuntime.mark((function l(){var r,o;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return(r=a.LODASH.cloneDeep(e)).data.value.splice(n.$index,1),l.next=4,a.updateOption(r);case 4:o=l.sent,a.options.splice(t,1,o);case 6:case"end":return l.stop()}}),l)})))()},handleAdd:function(e){"destinationCityOptions"===e.key?e.data.value.push({label:"#".concat(e.data.value.length+1),value:0,less300:0,less500:0,less1000:0,more1000:0,edit:!0}):e.data.value.push({label:"#".concat(e.data.value.length+1),value:0,edit:!0})},queryOptions:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.API.Calculate.getOptions();case 2:n=t.sent,e.options=n.data;case 4:case"end":return t.stop()}}),t)})))()},updateOption:function(e){var t=this;return Object(l.a)(regeneratorRuntime.mark((function n(){var l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.API.Calculate.update(e);case 2:return l=n.sent,n.abrupt("return",t.LODASH.get(l,"data[0]"));case 4:case"end":return n.stop()}}),n)})))()}}}),r=(n("48cb"),n("2877")),o=Object(r.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"calculate"},[n("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.options,(function(t,l){return n("el-collapse-item",{key:t.key,attrs:{name:t.key}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-collection-tag mr-px-4"}),e._v(" "+e._s(t.name)+" "),"variable"!==t.key?n("i",{staticClass:"el-icon-circle-plus text-green-400 text-18px ml-px-8",on:{click:function(n){return n.stopPropagation(),e.handleAdd(t)}}}):e._e()]),"select"===t.data.type?n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.handleSelectOptions(t.data.value)}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),n("el-table-column",{attrs:{prop:"label",label:"标签名"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("el-input",{model:{value:t.row.label,callback:function(n){e.$set(t.row,"label",n)},expression:"scope.row.label"}}):n("font",[e._v(e._s(t.row.label))])]}}],null,!0)}),n("el-table-column",{attrs:{prop:"value",label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("el-input",{attrs:{title:"请输入数字",type:"number",min:0},model:{value:t.row.value,callback:function(n){e.$set(t.row,"value",e._n(n))},expression:"scope.row.value"}}):n("font",[e._v(e._s(t.row.value))])]}}],null,!0)}),"destinationCityOptions"===t.key?[n("el-table-column",{attrs:{prop:"less300",label:"<300"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("el-input",{attrs:{title:"请输入数字",type:"number",min:0},model:{value:t.row.less300,callback:function(n){e.$set(t.row,"less300",e._n(n))},expression:"scope.row.less300"}}):n("font",[e._v(e._s(t.row.less300))])]}}],null,!0)}),n("el-table-column",{attrs:{prop:"less500",label:"<500"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("el-input",{attrs:{title:"请输入数字",type:"number",min:0},model:{value:t.row.less500,callback:function(n){e.$set(t.row,"less500",e._n(n))},expression:"scope.row.less500"}}):n("font",[e._v(e._s(t.row.less500))])]}}],null,!0)}),n("el-table-column",{attrs:{prop:"less1000",label:"<1000"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("el-input",{attrs:{title:"请输入数字",type:"number",min:0},model:{value:t.row.less1000,callback:function(n){e.$set(t.row,"less1000",e._n(n))},expression:"scope.row.less1000"}}):n("font",[e._v(e._s(t.row.less1000))])]}}],null,!0)}),n("el-table-column",{attrs:{prop:"more1000",label:">=1000"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("el-input",{attrs:{title:"请输入数字",type:"number",min:0},model:{value:t.row.more1000,callback:function(n){e.$set(t.row,"more1000",e._n(n))},expression:"scope.row.more1000"}}):n("font",[e._v(e._s(t.row.more1000))])]}}],null,!0)})]:e._e(),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.edit?n("el-button",{attrs:{type:"success",size:"small"},on:{click:function(n){return e.handleSave(t,l,a)}}},[e._v("完成")]):n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.handleEidt(t,a)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return e.handleRemove(t,l,a)}}},[e._v("删除")])]}}],null,!0)})],2):e._e(),"input"===t.data.type?n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.handleSelectOptions(t.data.value)}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),n("el-table-column",{attrs:{label:"变量"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("font",[e._v(e._s(t.row.key))])]}}],null,!0)}),n("el-table-column",{attrs:{prop:"label",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("font",[e._v(e._s(t.row.label))])]}}],null,!0)}),n("el-table-column",{attrs:{prop:"value",label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("el-input",{attrs:{title:"请输入数字",type:"number",min:0},model:{value:t.row.value,callback:function(n){e.$set(t.row,"value",e._n(n))},expression:"scope.row.value"}}):n("font",[e._v(e._s(t.row.value))])]}}],null,!0)}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.edit?n("el-button",{attrs:{type:"success",size:"small"},on:{click:function(n){return e.handleSave(t,l,a)}}},[e._v("完成")]):n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.handleEidt(t,a)}}},[e._v("编辑")])]}}],null,!0)})],1):e._e()],2)})),1)],1)}),[],!1,null,"75b540c5",null);t.default=o.exports}}]);